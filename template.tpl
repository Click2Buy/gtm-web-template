___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Click2Buy tag for retailers",
  "categories": [
    "ATTRIBUTION"
  ],
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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\u003d"
  },
  "description": "A tag to allow Click2Buy to track conversions",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "retailerKey",
    "displayName": "Click2Buy retailer key",
    "simpleValueType": true
  },
  {
    "type": "SELECT",
    "name": "dataSource",
    "displayName": "Data source",
    "macrosInSelect": true,
    "selectItems": [
      {
        "value": "standard",
        "displayValue": "Standard (dataLayer \"ecommerce\")"
      }
    ],
    "simpleValueType": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const injectScript = require('injectScript');
const copyFromDataLayer = require('copyFromDataLayer');
const setInWindow = require('setInWindow');
const copyFromWindow = require('copyFromWindow');

const retailerKey = data.retailerKey;
const scriptUrl = 'https://rs.clic2buy.com/retailers/' + retailerKey + '.js';

// --- 1. DATA COLLECTION ---
let ecommerceData;

if (data.dataSource === 'standard') {
  // Use the standard GA4/UA ecommerce object from dataLayer
  ecommerceData = copyFromDataLayer('ecommerce');
} else {
  // If the user selected a GTM variable, data.dataSource 
  // already contains the value of that variable.
  ecommerceData = data.dataSource;
}

// --- 2. QUEUING ---
let C2B = copyFromWindow('C2B') || {};
if (!C2B.q) { C2B.q = []; }

if (ecommerceData) {
  // Push the raw object into the command queue
  C2B.q.push([ecommerceData]); 
  setInWindow('C2B', C2B, true);
}

// --- 3. SCRIPT INJECTION ---
injectScript(scriptUrl, data.gtmOnSuccess, data.gtmOnFailure, 'C2B');


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "C2B"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_data_layer",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedKeys",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "keyPatterns",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "ecommerce"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://rs.clic2buy.com/retailers/*.js"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: Script url test
  code: |-
    const mockData = {
      retailerKey: 'MY-RETAILER-ID'
    };

    // We mock injectScript to intercept and verify the URL
    mock('injectScript', (url, onSuccess, onFailure, tagId) => {
      assertThat(url).isEqualTo('https://rs.clic2buy.com/retailers/MY-RETAILER-ID.js');
      onSuccess(); // Simulate successful load
    });

    runCode(mockData);
- name: Purchase test - Standard datasource
  code: |-
    const mockData = {
      retailerKey: 'ABC',
      dataSource: 'standard'
    };

    mock('copyFromDataLayer', (key) => {
      if (key === 'ecommerce') return { transaction_id: 'T1' };
    });

    mock('setInWindow', (key, value) => {
      if (key === 'C2B') {
        assertThat(value.q[0][0].transaction_id).isEqualTo('T1');
      }
    });

    mock('injectScript', (url, onSuccess) => onSuccess());
    runCode(mockData);
- name: Purchase test - Custom datasource
  code: "const mockData = {\n  retailerKey: 'ABC',\n  // When a user selects a variable\
    \ in a dropdown, GTM passes \n  // its resolved value directly to the 'dataSource'\
    \ property.\n  dataSource: { custom_id: 'C99' } \n};\n\nmock('setInWindow', (key,\
    \ value) => {\n  if (key === 'C2B') {\n    assertThat(value.q[0][0].custom_id).isEqualTo('C99');\n\
    \  }\n});\n\nmock('injectScript', (url, onSuccess) => onSuccess());\nrunCode(mockData);"


___NOTES___

Created on 13/02/2026 16:28:24


